# 1. 系统间通信方式

## 系统间通信方式

    基于文件
    基于共享内存
    基于 IPC
    基于 Socket
    基于数据库
    基于 RPC

    还有没有其他方式?

## 系统间通信方式

    各个模式的缺点:

    - 文件: 明显不方便，不及时
    - Socket:使用麻烦，多数情况下不如 RPC
    - 数据库:不实时，但是经常有人拿数据库来模拟消息队列
    - RPC:调用关系复杂，同步处理，压力大的时候无法缓冲

## 系统间通信方式

    我们期望有一种通信方式:

    - 可以实现异步的消息通信
    - 可以简化参与各方的复杂依赖关系
    - 可以在请求量很大的时候，缓冲一下 > 类比线程池里的 Queue
    - 某些情况下能保障消息的可靠性，甚至顺序

## 系统间通信方式

    这就是 MQ，Message Queue/Messaging System/Message Middlewire
    ~ 可以类比快递服务

# 2. 从队列到消息服务

## 从队列到消息服务

    - 内存里的Queue

---

    - Message Queue/Messaging System

     什么是消息?

## MQ 的四大作用

    对比其他通信模式，MQ 的优势在于:

    - 异步通信:异步通信，减少线程等待，特别是处理批量等大事务、耗时操作。
    - 系统解耦:系统不直接调用，降低依赖，特别是不在线也能保持通信最终完成。
    - 削峰平谷:压力大的时候，缓冲部分请求消息，类似于背压处理。
    - 可靠通信:提供多种消息模式、服务质量、顺序保障等。

# 3. 消息模式与消息协议\*

## 消息处理模式

    常见的有两种消息模式:

    - 点对点:PTP，Point-To-Point
    对应于 Queue

    - 发布订阅:PubSub，Publish-Subscribe，
    对应于Topic
